var utils={versions:function(){var n=navigator.userAgent;navigator.appVersion;return{trident:-1<n.indexOf("Trident"),presto:-1<n.indexOf("Presto"),webKit:-1<n.indexOf("AppleWebKit"),gecko:-1<n.indexOf("Gecko")&&-1==n.indexOf("KHTML"),mobile:!!n.match(/AppleWebKit.*Mobile.*/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<n.indexOf("Android")||-1<n.indexOf("Linux"),iPhone:-1<n.indexOf("iPhone"),iPad:-1<n.indexOf("iPad"),webApp:-1==n.indexOf("Safari"),weixin:-1<n.indexOf("MicroMessenger"),qq:" qq"==n.match(/\sQQ/i),QQ:-1<n.indexOf("QQ"),weibo:-1<n.indexOf("Weibo"),qzone:-1<n.indexOf("Qzone"),babylife:-1<n.indexOf("babylife"),facebook:-1<n.indexOf("FB"),Twitter:-1<n.indexOf("Twitter"),onLine:navigator.onLine}}(),GetQueryString:function(n){var e=window.location.search;e=e.replace(/&&/g,"&");var t=new RegExp("(^|&)"+n+"=([^&]*)(&|$)","i"),a=e.replace(/\?/g,"&").substr(1).match(t);return null!=a?a[2]:null},getDataStr:function(n){var e="";for(var t in n)e+=t+"="+n[t]+"&";return e},server:function(n,e,t,a){location.host;var i="http://op.ekaogo.com/"+n;$.ajax({url:i,type:"GET",processData:!1,dataType:"jsonp",async:!1,contentType:"application/jsonp; charset=utf-8",jsonp:"jsonpCallback",data:e}).done(function(n){t&&t(n)}).fail(function(n){t&&t(n)}).always(function(){console.log("complete")})},getAccToken:function(n,e){this.server("/wechat/accToken",this.getDataStr(n),function(n){e&&e(n)},"POST")},getSig:function(t,n){this.getAccToken(null,function(n){var e="http://op.ekaogo.com/wechat/accToken/sig?url="+encodeURIComponent(t);$.ajax({url:e,type:"GET",processData:!1,dataType:"jsonp",async:!1,contentType:"application/jsonp; charset=utf-8",jsonp:"jsonpCallback",data:{}}).done(function(n){wx.config({debug:!1,appId:n.data.appId,timestamp:n.data.timestamp,nonceStr:n.data.nonceStr,signature:n.data.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]})}).fail(function(n){}).always(function(){})})},back:function(n){window.history.back(),n&&n()},goTo:function(n,e){window.location.hash="/"+n,e&&e()},showLoading:function(){document.getElementsByClassName("loading-wrapper")[0].style.display="block"},hideLoading:function(){document.getElementsByClassName("loading-wrapper")[0].style.display="none"}};window.utils=utils;